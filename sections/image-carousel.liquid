{% comment %} Size Chart Carousel with Horizontal Scrolling for Léonie & Moi {% endcomment %}

{% schema %}
{
  "name": "Image Carousel",
  "settings": [
    {
      "type": "text",
      "id": "carousel_title",
      "label": "Titre du carrousel",
      "default": "Nos modèles en images"
    },
    {
      "type": "range",
      "id": "text_size",
      "label": "Taille du texte",
      "default": 20,
      "min": 10,
      "max": 50,
      "step": 1,
      "unit": "px"
    }
  ],
  "blocks": [
    {
      "type": "image_block",
      "name": "Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "carousel_image",
          "label": "Sélectionnez l'image"
        },
        {
          "type": "text",
          "id": "alt_text",
          "label": "Texte alternatif",
          "default": "Image du produit"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Carrousel d'images",
      "category": "Custom"
    }
  ]
}
{% endschema %}

<div class="size-chart-carousel">
    <h2 style="text-align: center; font-size: {{ section.settings.text_size }}px;">{{ section.settings.carousel_title }}</h2>
    <div class="carousel-container">
        <div class="carousel-items">
            {% for block in section.blocks %}
            <div class="carousel-item">
                <img src="{{ block.settings.carousel_image | image_url }}" alt="{{ block.settings.alt_text }}" width="300" height="auto" />
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<style>
.size-chart-carousel {
    margin: 20px 0;
}

.carousel-container {
    overflow-x: auto;
    white-space: nowrap;
    display: flex;
    gap: 20px;
}

.carousel-items {
    display: flex;
    scroll-snap-type: x mandatory;
}

.carousel-item {
    flex: 0 0 auto;
    scroll-snap-align: start;
}

.carousel-item img {
    height: 300px;
    width: auto;
    object-fit: cover;
    border-radius: 5px;
}

.carousel-container::-webkit-scrollbar {
    display: none;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.carousel-container').forEach(carousel => {
        carousel.addEventListener('wheel', (event) => {
            event.preventDefault();
            carousel.scrollLeft += event.deltaY;
        });
    });
});
</script>
